<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Rubik's Cube algos</title>
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" crossorigin="anonymous">

	<link rel="stylesheet" href="algos.css">

	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js" crossorigin="anonymous"></script>
	<link href="//cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />
	<script src="//cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.full.min.js"></script>

	<script src="//cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/jquery-stickytabs@1.2.4/jquery.stickytabs.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pegjs/0.9.0/peg.js" crossorigin="anonymous"></script>

	<script src="lib/virtualcube.js" crossorigin="anonymous"></script>	

	<script src="algos-data.js"></script>
	<script src="algos.js"></script>
	<script src="train.js"></script>
	<script src="control.js"></script>
	<script src="keyboard.js"></script>

	<script>
		var $j = jQuery.noConflict();
		var $ = $j;
		
   
		$j(function () {
/*
			rubik_cube = new RubikCube('canvas', 3, null, null, 600);
			rubik_cube.reset();

			rubik_cube3 = new RubikCube('canvas3', 3, null, null, 600);
			rubik_cube3.reset();*/

			var control = new Control()
			var train = new Train(control)
			var keybaord = new Keyboard(train, control)

			

			$('.nav-tabs').stickyTabs();


			let sp = new URLSearchParams(window.location.search)
			let algo = sp.get('algo')
			if (algo !== null) {
				$j('#algo').val(algo);
                control.move(algo, {fast: true});
			}
			$(':button').mouseup(function() { this.blur() })

			var tbl_body = $('<tbody>');
			var odd_even = false;
			$.each(data.triggers, function(k, v) {
				var tbl_row = $('<tr>').appendTo(tbl_body);						
				tbl_row.addClass(odd_even ? "odd" : "even");
				odd_even = !odd_even;               

				$('<td>').append($('<button>').text(k)).appendTo(tbl_row);
				$('<td>').text(v.moves).appendTo(tbl_row);
				$('<td>').text(v.inverse || "").appendTo(tbl_row);
						
			});
			$("#triggers").append(tbl_body).find('button').click(e => control.move(algos.parse($(e.target).text()).toMoves()))

			let render_moves = (base, lower) => {
				let a = move => $('<button>').text(move)[0]
				let row = base => [a(base), a(base + "'"), a(base + "2")]
				return [row(base).concat(lower ? row(base.toLowerCase()) : [])]
			}
			let array = "ULFRBD".split("").flatMap(move => render_moves(move, true)).
				 concat("MESxyz".split("").flatMap(move => render_moves(move, false)))
			array = array[0].map((col, i) => array.map(row => row[i]));
			array = array.reduce((tbody, row) => tbody.append(row.reduce((tr, move) => tr.append($('<td>').append(move)), $('<tr>'))), $('<tbody>'))
			$("#moves").append(array).click(e => {
				control.move([$(e.target).text()])
			})	
		});


		/*
		Cube applet : https://cubefreak.net/a/?case=R'UR'U'R'U'R'URUR2
		*/

	</script>
</head>

<body>
	<div>
		<div id="div_menu">
			<nav>
				<div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
					<a class="nav-item nav-link active show" id="nav-intro-tab" data-toggle="tab" href="#nav-intro"   role="tab" aria-controls="nav-intro" aria-selected="true">Intro</a>
					<a class="nav-item nav-link"             id="nav-f2l-tab"   data-toggle="tab" href="#nav-f2l"     role="tab" aria-controls="nav-f2l"   aria-selected="false">F2L</a>
					<a class="nav-item nav-link"             id="nav-oll2-tab"  data-toggle="tab" href="#nav-oll2"    role="tab" aria-controls="nav-oll2"  aria-selected="false">OLL (2 looks)</a>
					<a class="nav-item nav-link"             id="nav-oll-tab"   data-toggle="tab" href="#nav-oll"     role="tab" aria-controls="nav-oll"   aria-selected="false">OLL</a>
					<a class="nav-item nav-link"             id="nav-pll2-tab"  data-toggle="tab" href="#nav-pll2"    role="tab" aria-controls="nav-pll2"  aria-selected="false">PLL (2 look)</a>
					<a class="nav-item nav-link"             id="nav-pll-tab"   data-toggle="tab" href="#nav-pll"     role="tab" aria-controls="nav-pll"   aria-selected="false">PLL</a>
				</div>
			</nav>
			<!--<div style="clear:both"></div>-->
		</div>
	</div>

	<div class="well">
		<div id="nav-tabContent" class="tab-content">
			<div class="tab-pane fade active show" id="nav-intro" role="tabpanel" aria-labelledby="nav-intro-tab">
				<fieldset>
					<div class="container-fluid">
						<div class="row">
							<div id="cube-container" class="col mx-1 mt-n4">
								<canvas class="virtualcube" kind="RubiksCube" facelist="f,r,u,b,l,d" debug></canvas>
								<!--<canvas id="canvas3" width="500" height="500">
									Sorry, this demo requires a web browser which supports HTML5 canvas!
								</canvas>-->
							</div>
							<div class="col mx-1 my-3">
								<table id="triggers" class="table-sm text-left table-bordered w-auto">
									<thead>
									<tr>
										<th>Name</th>
										<th>Moves</th>
										<th>Inverse</th>
									</tr>
									</thead>	
								</table>
							</div>
						</div>
						<div class="row d-xl-none">
							<table id="moves" class="table-sm text-left table-bordered w-auto"></table>
						</div>
						
						<div class="row">
							<div class="col mx-1">
								<div class="row form-group"> 
									<input class="form-control-sm col-12" type="text" id="algo" value="M2 y M2 z M2 z">
									<input class="form-control-sm col" type="button" id="do-btn" value="Do">
									<input class="form-control-sm col" type="button" id="undo-btn" value="Undo">
									<input class="form-control-sm col" type="button" id="reset-btn" value="Reset">
									<input class="form-control-sm col" type="button" id="reposition-btn" value="Reposition">
									<div class="w-100"></div>
									<input id="reverse-btn" class="form-control-sm col-2" type="button" value="Reverse">
									<input id="order-btn" class="form-control-sm col-2" type="button" value="Order">
									<label class="col-2">mirror</label>
									<input type="button" id="mirror-x-btn" class="form-control-sm col-1" value="x" >
									<input type="button" id="mirror-y-btn" class="form-control-sm col-1" value="y" >
									<input type="button" id="mirror-z-btn" class="form-control-sm col-1" value="z" >
									<div class="w-100"></div>
									<label class="col">clockwise</label>
									<input type="button" id="clockwise-x-btn" class="form-control-sm col-1" value="x" >
									<input type="button" id="clockwise-y-btn" class="form-control-sm col-1" value="y" >
									<input type="button" id="clockwise-z-btn" class="form-control-sm col-1" value="z" >
									<label class="col">counter</label>
									<input type="button" id="counter-x-btn" class="form-control-sm col-1" value="x" >
									<input type="button" id="counter-y-btn" class="form-control-sm col-1" value="y" >
									<input type="button" id="counter-z-btn" class="form-control-sm col-1" value="z" >
									<div class="w-100"></div>
									<div id="result" class="col-10"></div>
									<input type="button" id="copy-btn" class="form-control-sm col-2" value="copy" >
								</div>
							</div>
							<div class="col mx-1">
								<div class="row form-group">
									<input id="full-btn" class="form-control-sm col-2" type="button" value="Full">
									<input id="start-btn" class="form-control-sm col-2" type="button" value="↞">
									<input id="back-btn" class="form-control-sm col-2" type="button" value="←">
									<input id="move_idx" class="form-control-sm col-2" type="text" value="0" style="width: 30px;">
									<input id="forward-btn" class="form-control-sm col-2" type="button" value="→">
									<input id="end-btn" class="form-control-sm col-2" type="button" value="↠">
								</div>
							</div>
							<div class="w-100 d-xl-none"></div>
							<div class="col mx-1">
								<div class="row form-group">							
										<input id="f2l-btn" type="button" value="F2L" class="form-control-sm col-2"></input>
										<select id="f2l-group" class="form-control-sm col-10">
											<option value="-1">-- random --</option>
											<option value="-2">-- algo --</option>
											<option value="0" >Corner on top, FL color facing side, edge colors match</option>
											<option value="1" >Corner on top, FL color facing side, edge colors opposite</option>
											<option value="2">Corner on top, FL color facing up</option>
											<option value="3">Corner down, edge on top</option>
											<option value="4">Edge down, corner on top</option>
											<option value="5">Corner down, edge down</option>
										</select>
										<input id="f2l-tips-btn" type="button" class="col-2" value="tip">
										<div id="f2l-tips" class="form-control-sm col-10"></div>
								</div>
							</div>
							<div class="col mx-1">
								<div class="row form-group">
									<input id="oll-btn" class="form-control-sm col-2" type="button" value="OLL">
									<select id="oll-group" class="form-control-sm col-10" multiple="multiple">
										<option value="-3" selected>-- 2 look --</option>
										<option value="-1">-- random --</option>
										<option value="-2">-- algo --</option>
									</select>
									<label class="col-6" for="oll-weight">weight of latest</label>
									<input class="form-control-sm col-6" type="range" id="oll-weight" name="oll-weight" min="0" max="10" step="1" value="10">								  
									<input id="oll-tips-btn" type="button" class="col-2" value="tip">
									<div id="oll-tips" class="col-10"></div>
								</div>
							</div>
							<div class="col mx-1">
								<div class="row form-group">
									<input id="pll-btn" class="form-control-sm col-2" type="button" value="PLL">
									<select id="pll-group" class="form-control-sm col-10" multiple="multiple">
										<option value="-3" selected>-- 2 look --</option>
										<option value="-1">-- random --</option>
										<option value="-2">-- algo --</option>
									</select>
									<label class="col-6" for="pll-weight">weight of latest</label>
									<input class="form-control-sm col-6" type="range" id="pll-weight" name="oll-weight" min="0" max="10" step="1" value="10">								  
									<input id="pll-tips-btn" type="button" class="col-2" value="tip">
									<div id="pll-tips" class="col-10" ></div>
								</div>
							</div>
						</div>
					</div>
					<br />				
					<br />
					<div>
						Sources :
						<br />https://sites.google.com/site/piauscubingsite/ &nbsp;
						<a href="https://sites.google.com/site/piauscubingsite/3x3x3/oll">OLL</a>
						<a href="https://sites.google.com/site/piauscubingsite/3x3x3/pll">PLL</a>
						<br />
						https://cube.crider.co.uk/ &nbsp;
						<a href="https://cube.crider.co.uk/visualcube.php">visualcube</a>
						<a href="https://sourceforge.net/projects/vcube/?source=dlp">[sources]</a>
						<a href="https://cube.crider.co.uk/zz.php?p=f2l">f2l</a>
						<br />
						https://www.francocube.com/ &nbsp;
						<a href="https://www.francocube.com/deadalnix/fridrich.php">fridrich</a>
						<br />
						https://monstermax.net/ &nbsp;
						<a href="pre3dCube.html">Cube Js</a>
						<a href="https://github.com/monstermax/rubiks_cube_html5">Cube Js (github)</a>
						<br />
						<br />
						Links:
						<br />
						<a href="https://badmephisto.com/">Badmephisto</a>
						<br />
						<a href="https://www.kungfoomanchu.com/">KungFooManchu</a>
						<br />
						<a href="https://www.cubezone.be/">CubeZone</a>
					</div>
				</fieldset>
			</div>			

			<div class="tab-pane fade" id="nav-f2l" role="tabpanel" aria-labelledby="nav-f2l-tab">
				<div> Note: maybe use alg.grouping to put similar cases on the same line
					<fieldset>
						<ul class="f2l"></ul>
					</fieldset>
				</div>
				<div style="clear:both;">
					<a href="https://badmephisto.com/f2l.php" target="_blank">badmephisto.com F2L</a>
					<br />
					<a href="https://www.cubewhiz.com/f2l.php" target="_blank">cubewhiz.com F2L</a>
					<br />
					<a href="https://www.francocube.com/deadalnix/fridrich.php#f2l" target="_blank">francocube.com F2L</a>
				</div>
			</div>

			<div class="tab-pane fade" id="nav-oll2" role="tabpanel" aria-labelledby="nav-oll2-tab">
				<div>
					<fieldset>
						<ul class="oll"></ul>
					</fieldset>
				</div>
			</div>

			<div class="tab-pane fade" id="nav-oll" role="tabpanel" aria-labelledby="nav-oll-tab">
				<div>
					<fieldset>
						<ul class="oll"></ul>
					</fieldset>
				</div>
			</div>

			<div class="tab-pane fade" id="nav-pll2" role="tabpanel" aria-labelledby="nav-pll2-tab">
				<div>
					<fieldset>
						<ul class="pll"></ul>
					</fieldset>
				</div>
			</div>

			<div class="tab-pane fade" id="nav-pll" role="tabpanel" aria-labelledby="nav-pll-tab">
				<div>
					<fieldset>
						<ul class="pll"></ul>
					</fieldset>
				</div>
				<div style="clear:both;">
					<a href="http://cubing.pt/wp-content/uploads/2017/03/pll2side-20140531.pdf" target="_blank">Mark49152’s Two-Sided PLL Recognition Guide</a>
					<br />
					<a href="https://sites.google.com/site/piauscubingsite/3x3x3/pll" target="_blank">Antoine Piau's PLL</a>
					<br />
					<a href="https://www.speedsolving.com/wiki/index.php/PLL" target="_blank">speedsolving.com PLL</a>
					<br />
					<a href="https://www.cubewhiz.com/pll.php" target="_blank">cubewhiz.com PLL</a>
				</div>

			</div>
		</div>
	</div>

</body>

</html>